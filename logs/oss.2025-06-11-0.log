2025-06-11 08:54:00.906 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-06-11 08:54:01.095 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-06-11 08:54:01.607 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-06-11 08:54:01.611 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-06-11 08:54:01.611 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-06-11 08:54:01.614 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-06-11 08:54:01.694 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-06-11 08:54:01.694 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-06-11 08:54:01.701 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-06-11 08:54:03.544 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-06-11 08:54:03.578 [main] INFO  c.a.n.client.config.impl.LocalConfigInfoProcessor - LOCAL_SNAPSHOT_PATH:C:\Users\lenovo\nacos\config
2025-06-11 08:54:03.589 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 75040ca6-6666-4130-b811-c4b082202691_config-0
2025-06-11 08:54:03.655 [main] INFO  com.alibaba.nacos.common.remote.client - [75040ca6-6666-4130-b811-c4b082202691_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$575/0x0000000800f66bb8
2025-06-11 08:54:03.656 [main] INFO  com.alibaba.nacos.common.remote.client - [75040ca6-6666-4130-b811-c4b082202691_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$576/0x0000000800f66fd8
2025-06-11 08:54:03.657 [main] INFO  com.alibaba.nacos.common.remote.client - [75040ca6-6666-4130-b811-c4b082202691_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-06-11 08:54:03.658 [main] INFO  com.alibaba.nacos.common.remote.client - [75040ca6-6666-4130-b811-c4b082202691_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-06-11 08:54:03.680 [main] INFO  com.alibaba.nacos.common.remote.client - [75040ca6-6666-4130-b811-c4b082202691_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-06-11 08:54:03.767 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-06-11 08:54:06.303 [main] INFO  com.alibaba.nacos.common.remote.client - [75040ca6-6666-4130-b811-c4b082202691_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1749603245927_127.0.0.1_52903
2025-06-11 08:54:06.305 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [75040ca6-6666-4130-b811-c4b082202691_config-0] Notify connected event to listeners.
2025-06-11 08:54:06.305 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [75040ca6-6666-4130-b811-c4b082202691_config-0] Connected,notify listen context...
2025-06-11 08:54:06.306 [main] INFO  com.alibaba.nacos.common.remote.client - [75040ca6-6666-4130-b811-c4b082202691_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-06-11 08:54:06.306 [main] INFO  com.alibaba.nacos.common.remote.client - [75040ca6-6666-4130-b811-c4b082202691_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$596/0x00000008010ce608
2025-06-11 08:54:06.440 [main] INFO  com.alibaba.nacos.client.config.impl.Limiter - limitTime:5.0
2025-06-11 08:54:06.480 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-oss] & group[DEFAULT_GROUP]
2025-06-11 08:54:06.488 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-oss.yaml] & group[DEFAULT_GROUP]
2025-06-11 08:54:06.511 [main] INFO  com.alibaba.nacos.client.config.utils.JvmUtil - isMultiInstance:false
2025-06-11 08:54:06.521 [main] INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration - Located property source: [BootstrapPropertySource {name='bootstrapProperties-xiaohashu-oss-dev.yaml,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-oss.yaml,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-oss,DEFAULT_GROUP'}]
2025-06-11 08:54:06.531 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-06-11 08:54:06.532 [main] INFO  c.q.xiaohashu.oss.biz.XiaohashuOssBizApplication - The following 1 profile is active: "dev"
2025-06-11 08:54:07.720 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=e2ca34db-4026-326f-b5c4-f3dea42a333f
2025-06-11 08:54:08.699 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8081 (http)
2025-06-11 08:54:08.726 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-06-11 08:54:08.727 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-06-11 08:54:08.982 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-11 08:54:08.983 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2426 ms
2025-06-11 08:54:12.451 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-06-11 08:54:14.653 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-06-11 08:54:14.738 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8081 (http) with context path ''
2025-06-11 08:54:14.748 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-06-11 08:54:14.748 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-06-11 08:54:14.750 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-06-11 08:54:14.775 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-06-11 08:54:14.775 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-06-11 08:54:14.781 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 289979e3-6664-4052-a59e-a251de71ad11
2025-06-11 08:54:14.786 [main] INFO  com.alibaba.nacos.common.remote.client - [289979e3-6664-4052-a59e-a251de71ad11] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-06-11 08:54:14.786 [main] INFO  com.alibaba.nacos.common.remote.client - [289979e3-6664-4052-a59e-a251de71ad11] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-06-11 08:54:14.787 [main] INFO  com.alibaba.nacos.common.remote.client - [289979e3-6664-4052-a59e-a251de71ad11] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-06-11 08:54:14.788 [main] INFO  com.alibaba.nacos.common.remote.client - [289979e3-6664-4052-a59e-a251de71ad11] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-06-11 08:54:14.788 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-06-11 08:54:14.917 [main] INFO  com.alibaba.nacos.common.remote.client - [289979e3-6664-4052-a59e-a251de71ad11] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1749603254797_127.0.0.1_52923
2025-06-11 08:54:14.917 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [289979e3-6664-4052-a59e-a251de71ad11] Notify connected event to listeners.
2025-06-11 08:54:14.917 [main] INFO  com.alibaba.nacos.common.remote.client - [289979e3-6664-4052-a59e-a251de71ad11] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-06-11 08:54:14.917 [main] INFO  com.alibaba.nacos.common.remote.client - [289979e3-6664-4052-a59e-a251de71ad11] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$596/0x00000008010ce608
2025-06-11 08:54:14.917 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-06-11 08:54:14.920 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-oss with instance Instance{instanceId='null', ip='192.168.42.1', port=8081, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2025-06-11 08:54:14.936 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-oss 192.168.42.1:8081 register finished
2025-06-11 08:54:16.381 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-06-11 08:54:16.401 [main] INFO  c.q.xiaohashu.oss.biz.XiaohashuOssBizApplication - Started XiaohashuOssBizApplication in 18.39 seconds (process running for 20.005)
2025-06-11 08:54:16.407 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - nacos.cache.data.init.snapshot = true 
2025-06-11 08:54:16.408 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-xiaohashu-127.0.0.1_8848] [subscribe] xiaohashu-oss+DEFAULT_GROUP+xiaohashu
2025-06-11 08:54:16.428 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-xiaohashu-127.0.0.1_8848] [add-listener] ok, tenant=xiaohashu, dataId=xiaohashu-oss, group=DEFAULT_GROUP, cnt=1
2025-06-11 08:54:16.428 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-oss, group=DEFAULT_GROUP
2025-06-11 08:54:16.430 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-xiaohashu-127.0.0.1_8848] [subscribe] xiaohashu-oss-dev.yaml+DEFAULT_GROUP+xiaohashu
2025-06-11 08:54:16.431 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-xiaohashu-127.0.0.1_8848] [add-listener] ok, tenant=xiaohashu, dataId=xiaohashu-oss-dev.yaml, group=DEFAULT_GROUP, cnt=1
2025-06-11 08:54:16.431 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-oss-dev.yaml, group=DEFAULT_GROUP
2025-06-11 08:54:16.432 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-xiaohashu-127.0.0.1_8848] [subscribe] xiaohashu-oss.yaml+DEFAULT_GROUP+xiaohashu
2025-06-11 08:54:16.432 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-xiaohashu-127.0.0.1_8848] [add-listener] ok, tenant=xiaohashu, dataId=xiaohashu-oss.yaml, group=DEFAULT_GROUP, cnt=1
2025-06-11 08:54:16.432 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-oss.yaml, group=DEFAULT_GROUP
2025-06-11 09:00:56.148 [http-nio-8081-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-11 09:00:56.156 [http-nio-8081-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-11 09:00:56.195 [http-nio-8081-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 38 ms
2025-06-11 09:00:56.219 [http-nio-8081-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2101
2025-06-11 09:00:56.268 [http-nio-8081-exec-1] WARN  org.apache.catalina.connector.Request - Creating the temporary upload location [C:\Users\lenovo\AppData\Local\Temp\tomcat.8081.15590584375435009564\work\Tomcat\localhost\ROOT] as it is required by the servlet [dispatcherServlet]
2025-06-11 09:00:56.593 [http-nio-8081-exec-1] INFO  c.q.xiaohashu.oss.biz.controller.FileController - 当前用户 ID: 2101
2025-06-11 09:00:56.850 [http-nio-8081-exec-1] INFO  c.q.x.oss.biz.strategy.impl.AliyunOSSFileStrategy - ## 上传文件至阿里云 OSS ...
2025-06-11 09:00:56.862 [http-nio-8081-exec-1] INFO  c.q.x.oss.biz.strategy.impl.AliyunOSSFileStrategy - ==> 开始上传文件至阿里云 OSS, ObjectName: d38234d4b5234e44b36bb9e2907abede.png
2025-06-11 09:01:00.835 [http-nio-8081-exec-1] WARN  com.aliyun.oss - [Server]Unable to execute HTTP request: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
[ErrorCode]: AccessDenied
[RequestId]: 6848D5490D0C6F3536D2776D
[HostId]: xiaohashu.oss-cn-guangzhou.aliyuncs.com
[EC]: 0003-00001403
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>AccessDenied</Code>
  <Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>
  <RequestId>6848D5490D0C6F3536D2776D</RequestId>
  <HostId>xiaohashu.oss-cn-guangzhou.aliyuncs.com</HostId>
  <Bucket>xiaohashu</Bucket>
  <Endpoint>oss-cn-hangzhou.aliyuncs.com</Endpoint>
  <EC>0003-00001403</EC>
  <RecommendDoc>https://api.aliyun.com/troubleshoot?q=0003-00001403</RecommendDoc>
</Error>

2025-06-11 09:01:00.840 [http-nio-8081-exec-1] ERROR c.q.x.oss.biz.exception.GlobalExceptionHandler - /file/upload request error, 
com.aliyun.oss.OSSException: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
[ErrorCode]: AccessDenied
[RequestId]: 6848D5490D0C6F3536D2776D
[HostId]: xiaohashu.oss-cn-guangzhou.aliyuncs.com
[EC]: 0003-00001403
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>AccessDenied</Code>
  <Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>
  <RequestId>6848D5490D0C6F3536D2776D</RequestId>
  <HostId>xiaohashu.oss-cn-guangzhou.aliyuncs.com</HostId>
  <Bucket>xiaohashu</Bucket>
  <Endpoint>oss-cn-hangzhou.aliyuncs.com</Endpoint>
  <EC>0003-00001403</EC>
  <RecommendDoc>https://api.aliyun.com/troubleshoot?q=0003-00001403</RecommendDoc>
</Error>

	at com.aliyun.oss.common.utils.ExceptionFactory.createOSSException(ExceptionFactory.java:103)
	at com.aliyun.oss.internal.OSSErrorResponseHandler.handle(OSSErrorResponseHandler.java:92)
	at com.aliyun.oss.common.comm.ServiceClient.handleResponse(ServiceClient.java:284)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequestImpl(ServiceClient.java:156)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequest(ServiceClient.java:85)
	at com.aliyun.oss.internal.OSSOperation.send(OSSOperation.java:134)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:192)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:153)
	at com.aliyun.oss.internal.OSSObjectOperation.writeObjectInternal(OSSObjectOperation.java:1173)
	at com.aliyun.oss.internal.OSSObjectOperation.putObject(OSSObjectOperation.java:107)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:627)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:611)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:605)
	at com.quanxiaoha.xiaohashu.oss.biz.strategy.impl.AliyunOSSFileStrategy.uploadFile(AliyunOSSFileStrategy.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:281)
	at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:482)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy80.uploadFile(Unknown Source)
	at com.quanxiaoha.xiaohashu.oss.biz.service.impl.FileServiceImpl.uploadFile(FileServiceImpl.java:29)
	at com.quanxiaoha.xiaohashu.oss.biz.controller.FileController.uploadFile(FileController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:547)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:614)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at com.quanxiaoha.framework.biz.context.filter.HeaderUserId2ContextFilter.doFilterInternal(HeaderUserId2ContextFilter.java:41)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2025-06-11 09:01:00.904 [http-nio-8081-exec-1] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2101
2025-06-11 09:01:58.800 [http-nio-8081-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2101
2025-06-11 09:01:58.923 [http-nio-8081-exec-2] INFO  c.q.xiaohashu.oss.biz.controller.FileController - 当前用户 ID: 2101
2025-06-11 09:01:58.923 [http-nio-8081-exec-2] INFO  c.q.x.oss.biz.strategy.impl.AliyunOSSFileStrategy - ## 上传文件至阿里云 OSS ...
2025-06-11 09:01:58.924 [http-nio-8081-exec-2] INFO  c.q.x.oss.biz.strategy.impl.AliyunOSSFileStrategy - ==> 开始上传文件至阿里云 OSS, ObjectName: 3fd4376d258341f09fc6622763b702c9.png
2025-06-11 09:02:02.436 [http-nio-8081-exec-2] WARN  com.aliyun.oss - [Server]Unable to execute HTTP request: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
[ErrorCode]: AccessDenied
[RequestId]: 6848D587EDAA9938388D9FDD
[HostId]: xiaohashu.oss-cn-guangzhou.aliyuncs.com
[EC]: 0003-00001403
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>AccessDenied</Code>
  <Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>
  <RequestId>6848D587EDAA9938388D9FDD</RequestId>
  <HostId>xiaohashu.oss-cn-guangzhou.aliyuncs.com</HostId>
  <Bucket>xiaohashu</Bucket>
  <Endpoint>oss-cn-hangzhou.aliyuncs.com</Endpoint>
  <EC>0003-00001403</EC>
  <RecommendDoc>https://api.aliyun.com/troubleshoot?q=0003-00001403</RecommendDoc>
</Error>

2025-06-11 09:02:02.436 [http-nio-8081-exec-2] ERROR c.q.x.oss.biz.exception.GlobalExceptionHandler - /file/upload request error, 
com.aliyun.oss.OSSException: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
[ErrorCode]: AccessDenied
[RequestId]: 6848D587EDAA9938388D9FDD
[HostId]: xiaohashu.oss-cn-guangzhou.aliyuncs.com
[EC]: 0003-00001403
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>AccessDenied</Code>
  <Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>
  <RequestId>6848D587EDAA9938388D9FDD</RequestId>
  <HostId>xiaohashu.oss-cn-guangzhou.aliyuncs.com</HostId>
  <Bucket>xiaohashu</Bucket>
  <Endpoint>oss-cn-hangzhou.aliyuncs.com</Endpoint>
  <EC>0003-00001403</EC>
  <RecommendDoc>https://api.aliyun.com/troubleshoot?q=0003-00001403</RecommendDoc>
</Error>

	at com.aliyun.oss.common.utils.ExceptionFactory.createOSSException(ExceptionFactory.java:103)
	at com.aliyun.oss.internal.OSSErrorResponseHandler.handle(OSSErrorResponseHandler.java:92)
	at com.aliyun.oss.common.comm.ServiceClient.handleResponse(ServiceClient.java:284)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequestImpl(ServiceClient.java:156)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequest(ServiceClient.java:85)
	at com.aliyun.oss.internal.OSSOperation.send(OSSOperation.java:134)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:192)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:153)
	at com.aliyun.oss.internal.OSSObjectOperation.writeObjectInternal(OSSObjectOperation.java:1173)
	at com.aliyun.oss.internal.OSSObjectOperation.putObject(OSSObjectOperation.java:107)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:627)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:611)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:605)
	at com.quanxiaoha.xiaohashu.oss.biz.strategy.impl.AliyunOSSFileStrategy.uploadFile(AliyunOSSFileStrategy.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:281)
	at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:482)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy80.uploadFile(Unknown Source)
	at com.quanxiaoha.xiaohashu.oss.biz.service.impl.FileServiceImpl.uploadFile(FileServiceImpl.java:29)
	at com.quanxiaoha.xiaohashu.oss.biz.controller.FileController.uploadFile(FileController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:547)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:614)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at com.quanxiaoha.framework.biz.context.filter.HeaderUserId2ContextFilter.doFilterInternal(HeaderUserId2ContextFilter.java:41)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2025-06-11 09:02:02.440 [http-nio-8081-exec-2] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2101
2025-06-11 09:02:37.141 [http-nio-8081-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2101
2025-06-11 09:02:37.233 [http-nio-8081-exec-3] INFO  c.q.xiaohashu.oss.biz.controller.FileController - 当前用户 ID: 2101
2025-06-11 09:02:37.233 [http-nio-8081-exec-3] INFO  c.q.x.oss.biz.strategy.impl.AliyunOSSFileStrategy - ## 上传文件至阿里云 OSS ...
2025-06-11 09:02:37.234 [http-nio-8081-exec-3] INFO  c.q.x.oss.biz.strategy.impl.AliyunOSSFileStrategy - ==> 开始上传文件至阿里云 OSS, ObjectName: 63d7a591bc014e26b387d710c203edf4.png
2025-06-11 09:02:40.594 [http-nio-8081-exec-3] WARN  com.aliyun.oss - [Server]Unable to execute HTTP request: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
[ErrorCode]: AccessDenied
[RequestId]: 6848D5AD54FAD7383938FAE4
[HostId]: xiaohashu.oss-cn-guangzhou.aliyuncs.com
[EC]: 0003-00001403
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>AccessDenied</Code>
  <Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>
  <RequestId>6848D5AD54FAD7383938FAE4</RequestId>
  <HostId>xiaohashu.oss-cn-guangzhou.aliyuncs.com</HostId>
  <Bucket>xiaohashu</Bucket>
  <Endpoint>oss-cn-hangzhou.aliyuncs.com</Endpoint>
  <EC>0003-00001403</EC>
  <RecommendDoc>https://api.aliyun.com/troubleshoot?q=0003-00001403</RecommendDoc>
</Error>

2025-06-11 09:02:40.594 [http-nio-8081-exec-3] ERROR c.q.x.oss.biz.exception.GlobalExceptionHandler - /file/upload request error, 
com.aliyun.oss.OSSException: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
[ErrorCode]: AccessDenied
[RequestId]: 6848D5AD54FAD7383938FAE4
[HostId]: xiaohashu.oss-cn-guangzhou.aliyuncs.com
[EC]: 0003-00001403
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>AccessDenied</Code>
  <Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>
  <RequestId>6848D5AD54FAD7383938FAE4</RequestId>
  <HostId>xiaohashu.oss-cn-guangzhou.aliyuncs.com</HostId>
  <Bucket>xiaohashu</Bucket>
  <Endpoint>oss-cn-hangzhou.aliyuncs.com</Endpoint>
  <EC>0003-00001403</EC>
  <RecommendDoc>https://api.aliyun.com/troubleshoot?q=0003-00001403</RecommendDoc>
</Error>

	at com.aliyun.oss.common.utils.ExceptionFactory.createOSSException(ExceptionFactory.java:103)
	at com.aliyun.oss.internal.OSSErrorResponseHandler.handle(OSSErrorResponseHandler.java:92)
	at com.aliyun.oss.common.comm.ServiceClient.handleResponse(ServiceClient.java:284)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequestImpl(ServiceClient.java:156)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequest(ServiceClient.java:85)
	at com.aliyun.oss.internal.OSSOperation.send(OSSOperation.java:134)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:192)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:153)
	at com.aliyun.oss.internal.OSSObjectOperation.writeObjectInternal(OSSObjectOperation.java:1173)
	at com.aliyun.oss.internal.OSSObjectOperation.putObject(OSSObjectOperation.java:107)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:627)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:611)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:605)
	at com.quanxiaoha.xiaohashu.oss.biz.strategy.impl.AliyunOSSFileStrategy.uploadFile(AliyunOSSFileStrategy.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:281)
	at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:482)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy80.uploadFile(Unknown Source)
	at com.quanxiaoha.xiaohashu.oss.biz.service.impl.FileServiceImpl.uploadFile(FileServiceImpl.java:29)
	at com.quanxiaoha.xiaohashu.oss.biz.controller.FileController.uploadFile(FileController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:547)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:614)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at com.quanxiaoha.framework.biz.context.filter.HeaderUserId2ContextFilter.doFilterInternal(HeaderUserId2ContextFilter.java:41)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2025-06-11 09:02:40.597 [http-nio-8081-exec-3] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2101
2025-06-11 09:06:47.773 [http-nio-8081-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2101
2025-06-11 09:06:47.849 [http-nio-8081-exec-5] INFO  c.q.xiaohashu.oss.biz.controller.FileController - 当前用户 ID: 2101
2025-06-11 09:06:47.849 [http-nio-8081-exec-5] INFO  c.q.x.oss.biz.strategy.impl.AliyunOSSFileStrategy - ## 上传文件至阿里云 OSS ...
2025-06-11 09:06:47.850 [http-nio-8081-exec-5] INFO  c.q.x.oss.biz.strategy.impl.AliyunOSSFileStrategy - ==> 开始上传文件至阿里云 OSS, ObjectName: 4521935199514b05a1ba6980b880d1b5.png
2025-06-11 09:06:51.251 [http-nio-8081-exec-5] WARN  com.aliyun.oss - [Server]Unable to execute HTTP request: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
[ErrorCode]: AccessDenied
[RequestId]: 6848D6A80D0C6F3235A7AA6E
[HostId]: xiaohashu.oss-cn-guangzhou.aliyuncs.com
[EC]: 0003-00001403
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>AccessDenied</Code>
  <Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>
  <RequestId>6848D6A80D0C6F3235A7AA6E</RequestId>
  <HostId>xiaohashu.oss-cn-guangzhou.aliyuncs.com</HostId>
  <Bucket>xiaohashu</Bucket>
  <Endpoint>oss-cn-hangzhou.aliyuncs.com</Endpoint>
  <EC>0003-00001403</EC>
  <RecommendDoc>https://api.aliyun.com/troubleshoot?q=0003-00001403</RecommendDoc>
</Error>

2025-06-11 09:06:51.252 [http-nio-8081-exec-5] ERROR c.q.x.oss.biz.exception.GlobalExceptionHandler - /file/upload request error, 
com.aliyun.oss.OSSException: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
[ErrorCode]: AccessDenied
[RequestId]: 6848D6A80D0C6F3235A7AA6E
[HostId]: xiaohashu.oss-cn-guangzhou.aliyuncs.com
[EC]: 0003-00001403
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>AccessDenied</Code>
  <Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>
  <RequestId>6848D6A80D0C6F3235A7AA6E</RequestId>
  <HostId>xiaohashu.oss-cn-guangzhou.aliyuncs.com</HostId>
  <Bucket>xiaohashu</Bucket>
  <Endpoint>oss-cn-hangzhou.aliyuncs.com</Endpoint>
  <EC>0003-00001403</EC>
  <RecommendDoc>https://api.aliyun.com/troubleshoot?q=0003-00001403</RecommendDoc>
</Error>

	at com.aliyun.oss.common.utils.ExceptionFactory.createOSSException(ExceptionFactory.java:103)
	at com.aliyun.oss.internal.OSSErrorResponseHandler.handle(OSSErrorResponseHandler.java:92)
	at com.aliyun.oss.common.comm.ServiceClient.handleResponse(ServiceClient.java:284)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequestImpl(ServiceClient.java:156)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequest(ServiceClient.java:85)
	at com.aliyun.oss.internal.OSSOperation.send(OSSOperation.java:134)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:192)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:153)
	at com.aliyun.oss.internal.OSSObjectOperation.writeObjectInternal(OSSObjectOperation.java:1173)
	at com.aliyun.oss.internal.OSSObjectOperation.putObject(OSSObjectOperation.java:107)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:627)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:611)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:605)
	at com.quanxiaoha.xiaohashu.oss.biz.strategy.impl.AliyunOSSFileStrategy.uploadFile(AliyunOSSFileStrategy.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:281)
	at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:482)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy80.uploadFile(Unknown Source)
	at com.quanxiaoha.xiaohashu.oss.biz.service.impl.FileServiceImpl.uploadFile(FileServiceImpl.java:29)
	at com.quanxiaoha.xiaohashu.oss.biz.controller.FileController.uploadFile(FileController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:547)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:614)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at com.quanxiaoha.framework.biz.context.filter.HeaderUserId2ContextFilter.doFilterInternal(HeaderUserId2ContextFilter.java:41)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2025-06-11 09:06:51.254 [http-nio-8081-exec-5] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2101
2025-06-11 09:06:57.870 [http-nio-8081-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2101
2025-06-11 09:06:57.942 [http-nio-8081-exec-6] INFO  c.q.xiaohashu.oss.biz.controller.FileController - 当前用户 ID: 2101
2025-06-11 09:06:57.942 [http-nio-8081-exec-6] INFO  c.q.x.oss.biz.strategy.impl.AliyunOSSFileStrategy - ## 上传文件至阿里云 OSS ...
2025-06-11 09:06:57.943 [http-nio-8081-exec-6] INFO  c.q.x.oss.biz.strategy.impl.AliyunOSSFileStrategy - ==> 开始上传文件至阿里云 OSS, ObjectName: 8a6639b003024336a34f81e4b011354c.png
2025-06-11 09:07:00.705 [http-nio-8081-exec-6] WARN  com.aliyun.oss - [Server]Unable to execute HTTP request: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
[ErrorCode]: AccessDenied
[RequestId]: 6848D6B282CDD230367B2B45
[HostId]: xiaohashu.oss-cn-guangzhou.aliyuncs.com
[EC]: 0003-00001403
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>AccessDenied</Code>
  <Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>
  <RequestId>6848D6B282CDD230367B2B45</RequestId>
  <HostId>xiaohashu.oss-cn-guangzhou.aliyuncs.com</HostId>
  <Bucket>xiaohashu</Bucket>
  <Endpoint>oss-cn-hangzhou.aliyuncs.com</Endpoint>
  <EC>0003-00001403</EC>
  <RecommendDoc>https://api.aliyun.com/troubleshoot?q=0003-00001403</RecommendDoc>
</Error>

2025-06-11 09:07:00.705 [http-nio-8081-exec-6] ERROR c.q.x.oss.biz.exception.GlobalExceptionHandler - /file/upload request error, 
com.aliyun.oss.OSSException: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
[ErrorCode]: AccessDenied
[RequestId]: 6848D6B282CDD230367B2B45
[HostId]: xiaohashu.oss-cn-guangzhou.aliyuncs.com
[EC]: 0003-00001403
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>AccessDenied</Code>
  <Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>
  <RequestId>6848D6B282CDD230367B2B45</RequestId>
  <HostId>xiaohashu.oss-cn-guangzhou.aliyuncs.com</HostId>
  <Bucket>xiaohashu</Bucket>
  <Endpoint>oss-cn-hangzhou.aliyuncs.com</Endpoint>
  <EC>0003-00001403</EC>
  <RecommendDoc>https://api.aliyun.com/troubleshoot?q=0003-00001403</RecommendDoc>
</Error>

	at com.aliyun.oss.common.utils.ExceptionFactory.createOSSException(ExceptionFactory.java:103)
	at com.aliyun.oss.internal.OSSErrorResponseHandler.handle(OSSErrorResponseHandler.java:92)
	at com.aliyun.oss.common.comm.ServiceClient.handleResponse(ServiceClient.java:284)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequestImpl(ServiceClient.java:156)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequest(ServiceClient.java:85)
	at com.aliyun.oss.internal.OSSOperation.send(OSSOperation.java:134)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:192)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:153)
	at com.aliyun.oss.internal.OSSObjectOperation.writeObjectInternal(OSSObjectOperation.java:1173)
	at com.aliyun.oss.internal.OSSObjectOperation.putObject(OSSObjectOperation.java:107)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:627)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:611)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:605)
	at com.quanxiaoha.xiaohashu.oss.biz.strategy.impl.AliyunOSSFileStrategy.uploadFile(AliyunOSSFileStrategy.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:281)
	at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:482)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy80.uploadFile(Unknown Source)
	at com.quanxiaoha.xiaohashu.oss.biz.service.impl.FileServiceImpl.uploadFile(FileServiceImpl.java:29)
	at com.quanxiaoha.xiaohashu.oss.biz.controller.FileController.uploadFile(FileController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:547)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:614)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at com.quanxiaoha.framework.biz.context.filter.HeaderUserId2ContextFilter.doFilterInternal(HeaderUserId2ContextFilter.java:41)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2025-06-11 09:07:00.708 [http-nio-8081-exec-6] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2101
2025-06-11 09:07:51.294 [http-nio-8081-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2101
2025-06-11 09:07:51.385 [http-nio-8081-exec-8] INFO  c.q.xiaohashu.oss.biz.controller.FileController - 当前用户 ID: 2101
2025-06-11 09:07:51.385 [http-nio-8081-exec-8] INFO  c.q.x.oss.biz.strategy.impl.AliyunOSSFileStrategy - ## 上传文件至阿里云 OSS ...
2025-06-11 09:07:51.386 [http-nio-8081-exec-8] INFO  c.q.x.oss.biz.strategy.impl.AliyunOSSFileStrategy - ==> 开始上传文件至阿里云 OSS, ObjectName: e833b7773bd44301a48133d96af5dd4d.png
2025-06-11 09:07:54.765 [http-nio-8081-exec-8] WARN  com.aliyun.oss - [Server]Unable to execute HTTP request: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
[ErrorCode]: AccessDenied
[RequestId]: 6848D6E758E3C232366E80F0
[HostId]: xiaohashu.oss-cn-guangzhou.aliyuncs.com
[EC]: 0003-00001403
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>AccessDenied</Code>
  <Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>
  <RequestId>6848D6E758E3C232366E80F0</RequestId>
  <HostId>xiaohashu.oss-cn-guangzhou.aliyuncs.com</HostId>
  <Bucket>xiaohashu</Bucket>
  <Endpoint>oss-cn-hangzhou.aliyuncs.com</Endpoint>
  <EC>0003-00001403</EC>
  <RecommendDoc>https://api.aliyun.com/troubleshoot?q=0003-00001403</RecommendDoc>
</Error>

2025-06-11 09:07:54.765 [http-nio-8081-exec-8] ERROR c.q.x.oss.biz.exception.GlobalExceptionHandler - /file/upload request error, 
com.aliyun.oss.OSSException: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
[ErrorCode]: AccessDenied
[RequestId]: 6848D6E758E3C232366E80F0
[HostId]: xiaohashu.oss-cn-guangzhou.aliyuncs.com
[EC]: 0003-00001403
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>AccessDenied</Code>
  <Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>
  <RequestId>6848D6E758E3C232366E80F0</RequestId>
  <HostId>xiaohashu.oss-cn-guangzhou.aliyuncs.com</HostId>
  <Bucket>xiaohashu</Bucket>
  <Endpoint>oss-cn-hangzhou.aliyuncs.com</Endpoint>
  <EC>0003-00001403</EC>
  <RecommendDoc>https://api.aliyun.com/troubleshoot?q=0003-00001403</RecommendDoc>
</Error>

	at com.aliyun.oss.common.utils.ExceptionFactory.createOSSException(ExceptionFactory.java:103)
	at com.aliyun.oss.internal.OSSErrorResponseHandler.handle(OSSErrorResponseHandler.java:92)
	at com.aliyun.oss.common.comm.ServiceClient.handleResponse(ServiceClient.java:284)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequestImpl(ServiceClient.java:156)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequest(ServiceClient.java:85)
	at com.aliyun.oss.internal.OSSOperation.send(OSSOperation.java:134)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:192)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:153)
	at com.aliyun.oss.internal.OSSObjectOperation.writeObjectInternal(OSSObjectOperation.java:1173)
	at com.aliyun.oss.internal.OSSObjectOperation.putObject(OSSObjectOperation.java:107)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:627)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:611)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:605)
	at com.quanxiaoha.xiaohashu.oss.biz.strategy.impl.AliyunOSSFileStrategy.uploadFile(AliyunOSSFileStrategy.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:281)
	at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:482)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy80.uploadFile(Unknown Source)
	at com.quanxiaoha.xiaohashu.oss.biz.service.impl.FileServiceImpl.uploadFile(FileServiceImpl.java:29)
	at com.quanxiaoha.xiaohashu.oss.biz.controller.FileController.uploadFile(FileController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:547)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:614)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at com.quanxiaoha.framework.biz.context.filter.HeaderUserId2ContextFilter.doFilterInternal(HeaderUserId2ContextFilter.java:41)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2025-06-11 09:07:54.767 [http-nio-8081-exec-8] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2101
2025-06-11 09:13:28.936 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-06-11 09:13:28.936 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-06-11 09:13:28.937 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-06-11 09:13:28.941 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-06-11 09:13:29.020 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-06-11 09:13:29.020 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-oss with instance: Instance{instanceId='null', ip='192.168.42.1', port=8081, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-06-11 09:13:29.051 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-06-11 09:13:29.052 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-06-11 09:13:29.052 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-06-11 09:13:29.053 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-06-11 09:13:29.053 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-06-11 09:13:29.053 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-06-11 09:13:29.053 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-06-11 09:13:29.053 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-06-11 09:13:29.053 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-06-11 09:13:29.053 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-06-11 09:13:29.053 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-06-11 09:13:29.053 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-06-11 09:13:29.053 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-06-11 09:13:29.053 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-06-11 09:13:29.053 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-06-11 09:13:29.053 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-06-11 09:13:29.054 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-06-11 09:13:29.054 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@6f3ab377[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-06-11 09:13:29.054 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1749603254797_127.0.0.1_52923
2025-06-11 09:13:29.067 [nacos-grpc-client-executor-127.0.0.1-244] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1749603254797_127.0.0.1_52923]Ignore complete event,isRunning:false,isAbandon=false
2025-06-11 09:13:29.072 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@303ab59c[Running, pool size = 5, active threads = 0, queued tasks = 0, completed tasks = 245]
2025-06-11 09:13:29.073 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@41d5d7d8[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 383]
2025-06-11 09:13:29.073 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-06-11 09:13:29.073 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-06-11 09:13:29.073 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2025-06-11 14:12:56.164 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-06-11 14:12:56.438 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-06-11 14:12:57.253 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-06-11 14:12:57.258 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2025-06-11 14:12:57.258 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2025-06-11 14:12:57.262 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2025-06-11 14:12:57.383 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-06-11 14:12:57.384 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-06-11 14:12:57.398 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2025-06-11 14:12:59.708 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-06-11 14:12:59.754 [main] INFO  c.a.n.client.config.impl.LocalConfigInfoProcessor - LOCAL_SNAPSHOT_PATH:C:\Users\lenovo\nacos\config
2025-06-11 14:12:59.769 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 5dd7ee9a-0c01-4f6e-8f3d-7d22e8286939_config-0
2025-06-11 14:12:59.865 [main] INFO  com.alibaba.nacos.common.remote.client - [5dd7ee9a-0c01-4f6e-8f3d-7d22e8286939_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$587/0x0000000800f90658
2025-06-11 14:12:59.865 [main] INFO  com.alibaba.nacos.common.remote.client - [5dd7ee9a-0c01-4f6e-8f3d-7d22e8286939_config-0] Register server push request handler:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$$Lambda$588/0x0000000800f90a78
2025-06-11 14:12:59.867 [main] INFO  com.alibaba.nacos.common.remote.client - [5dd7ee9a-0c01-4f6e-8f3d-7d22e8286939_config-0] Registry connection listener to current client:com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$1
2025-06-11 14:12:59.868 [main] INFO  com.alibaba.nacos.common.remote.client - [5dd7ee9a-0c01-4f6e-8f3d-7d22e8286939_config-0] RpcClient init, ServerListFactory = com.alibaba.nacos.client.config.impl.ClientWorker$ConfigRpcTransportClient$2
2025-06-11 14:12:59.901 [main] INFO  com.alibaba.nacos.common.remote.client - [5dd7ee9a-0c01-4f6e-8f3d-7d22e8286939_config-0] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-06-11 14:13:00.011 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-06-11 14:13:03.521 [main] INFO  com.alibaba.nacos.common.remote.client - [5dd7ee9a-0c01-4f6e-8f3d-7d22e8286939_config-0] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1749622383057_127.0.0.1_52156
2025-06-11 14:13:03.523 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [5dd7ee9a-0c01-4f6e-8f3d-7d22e8286939_config-0] Notify connected event to listeners.
2025-06-11 14:13:03.524 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [5dd7ee9a-0c01-4f6e-8f3d-7d22e8286939_config-0] Connected,notify listen context...
2025-06-11 14:13:03.526 [main] INFO  com.alibaba.nacos.common.remote.client - [5dd7ee9a-0c01-4f6e-8f3d-7d22e8286939_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-06-11 14:13:03.526 [main] INFO  com.alibaba.nacos.common.remote.client - [5dd7ee9a-0c01-4f6e-8f3d-7d22e8286939_config-0] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$608/0x00000008010d8a88
2025-06-11 14:13:03.840 [main] INFO  com.alibaba.nacos.client.config.impl.Limiter - limitTime:5.0
2025-06-11 14:13:03.888 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-oss] & group[DEFAULT_GROUP]
2025-06-11 14:13:03.905 [main] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-oss.yaml] & group[DEFAULT_GROUP]
2025-06-11 14:13:03.949 [main] INFO  com.alibaba.nacos.client.config.utils.JvmUtil - isMultiInstance:false
2025-06-11 14:13:03.963 [main] INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration - Located property source: [BootstrapPropertySource {name='bootstrapProperties-xiaohashu-oss-dev.yaml,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-oss.yaml,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-oss,DEFAULT_GROUP'}]
2025-06-11 14:13:03.980 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-06-11 14:13:03.981 [main] INFO  c.q.xiaohashu.oss.biz.XiaohashuOssBizApplication - The following 1 profile is active: "dev"
2025-06-11 14:13:05.605 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=e2ca34db-4026-326f-b5c4-f3dea42a333f
2025-06-11 14:13:07.099 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8081 (http)
2025-06-11 14:13:07.140 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-06-11 14:13:07.141 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-06-11 14:13:07.690 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-11 14:13:07.691 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3665 ms
2025-06-11 14:13:11.638 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-06-11 14:13:13.836 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-06-11 14:13:13.943 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8081 (http) with context path ''
2025-06-11 14:13:13.951 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2025-06-11 14:13:13.951 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2025-06-11 14:13:13.953 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2025-06-11 14:13:13.978 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-06-11 14:13:13.979 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-06-11 14:13:13.985 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 859a1986-3064-427e-b102-a98bed000573
2025-06-11 14:13:13.990 [main] INFO  com.alibaba.nacos.common.remote.client - [859a1986-3064-427e-b102-a98bed000573] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2025-06-11 14:13:13.990 [main] INFO  com.alibaba.nacos.common.remote.client - [859a1986-3064-427e-b102-a98bed000573] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2025-06-11 14:13:13.991 [main] INFO  com.alibaba.nacos.common.remote.client - [859a1986-3064-427e-b102-a98bed000573] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2025-06-11 14:13:13.991 [main] INFO  com.alibaba.nacos.common.remote.client - [859a1986-3064-427e-b102-a98bed000573] Try to connect to server on start up, server: {serverIp = '127.0.0.1', server main port = 8848}
2025-06-11 14:13:13.991 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:127.0.0.1 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2025-06-11 14:13:14.114 [main] INFO  com.alibaba.nacos.common.remote.client - [859a1986-3064-427e-b102-a98bed000573] Success to connect to server [127.0.0.1:8848] on start up, connectionId = 1749622394000_127.0.0.1_52207
2025-06-11 14:13:14.114 [main] INFO  com.alibaba.nacos.common.remote.client - [859a1986-3064-427e-b102-a98bed000573] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2025-06-11 14:13:14.114 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [859a1986-3064-427e-b102-a98bed000573] Notify connected event to listeners.
2025-06-11 14:13:14.115 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2025-06-11 14:13:14.115 [main] INFO  com.alibaba.nacos.common.remote.client - [859a1986-3064-427e-b102-a98bed000573] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$608/0x00000008010d8a88
2025-06-11 14:13:14.118 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaohashu registering service xiaohashu-oss with instance Instance{instanceId='null', ip='192.168.42.1', port=8081, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2025-06-11 14:13:14.139 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-oss 192.168.42.1:8081 register finished
2025-06-11 14:13:15.673 [main] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-06-11 14:13:15.698 [main] INFO  c.q.xiaohashu.oss.biz.XiaohashuOssBizApplication - Started XiaohashuOssBizApplication in 23.738 seconds (process running for 26.203)
2025-06-11 14:13:15.707 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - nacos.cache.data.init.snapshot = true 
2025-06-11 14:13:15.708 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-xiaohashu-127.0.0.1_8848] [subscribe] xiaohashu-oss+DEFAULT_GROUP+xiaohashu
2025-06-11 14:13:15.737 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-xiaohashu-127.0.0.1_8848] [add-listener] ok, tenant=xiaohashu, dataId=xiaohashu-oss, group=DEFAULT_GROUP, cnt=1
2025-06-11 14:13:15.737 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-oss, group=DEFAULT_GROUP
2025-06-11 14:13:15.739 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-xiaohashu-127.0.0.1_8848] [subscribe] xiaohashu-oss-dev.yaml+DEFAULT_GROUP+xiaohashu
2025-06-11 14:13:15.739 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-xiaohashu-127.0.0.1_8848] [add-listener] ok, tenant=xiaohashu, dataId=xiaohashu-oss-dev.yaml, group=DEFAULT_GROUP, cnt=1
2025-06-11 14:13:15.740 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-oss-dev.yaml, group=DEFAULT_GROUP
2025-06-11 14:13:15.740 [main] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-xiaohashu-127.0.0.1_8848] [subscribe] xiaohashu-oss.yaml+DEFAULT_GROUP+xiaohashu
2025-06-11 14:13:15.741 [main] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-xiaohashu-127.0.0.1_8848] [add-listener] ok, tenant=xiaohashu, dataId=xiaohashu-oss.yaml, group=DEFAULT_GROUP, cnt=1
2025-06-11 14:13:15.741 [main] INFO  c.a.cloud.nacos.refresh.NacosContextRefresher - [Nacos Config] Listening config: dataId=xiaohashu-oss.yaml, group=DEFAULT_GROUP
2025-06-11 14:33:24.453 [http-nio-8081-exec-3] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-11 14:33:24.455 [http-nio-8081-exec-3] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-11 14:33:24.457 [http-nio-8081-exec-3] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-06-11 14:33:24.669 [http-nio-8081-exec-3] INFO  c.q.xiaohashu.oss.biz.controller.FileController - 当前用户 ID: null
2025-06-11 14:33:24.672 [http-nio-8081-exec-3] INFO  c.q.x.oss.biz.strategy.impl.AliyunOSSFileStrategy - ## 上传文件至阿里云 OSS ...
2025-06-11 14:33:24.673 [http-nio-8081-exec-3] INFO  c.q.x.oss.biz.strategy.impl.AliyunOSSFileStrategy - ==> 开始上传文件至阿里云 OSS, ObjectName: 07922c7f55bd4338b0151b12a4d25bd4.png
2025-06-11 14:33:28.638 [http-nio-8081-exec-3] WARN  com.aliyun.oss - [Server]Unable to execute HTTP request: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
[ErrorCode]: AccessDenied
[RequestId]: 68492335D8B6EE3636F55C97
[HostId]: xiaohashu.oss-cn-guangzhou.aliyuncs.com
[EC]: 0003-00001403
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>AccessDenied</Code>
  <Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>
  <RequestId>68492335D8B6EE3636F55C97</RequestId>
  <HostId>xiaohashu.oss-cn-guangzhou.aliyuncs.com</HostId>
  <Bucket>xiaohashu</Bucket>
  <Endpoint>oss-cn-hangzhou.aliyuncs.com</Endpoint>
  <EC>0003-00001403</EC>
  <RecommendDoc>https://api.aliyun.com/troubleshoot?q=0003-00001403</RecommendDoc>
</Error>

2025-06-11 14:33:28.643 [http-nio-8081-exec-3] ERROR c.q.x.oss.biz.exception.GlobalExceptionHandler - /file/upload request error, 
com.aliyun.oss.OSSException: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
[ErrorCode]: AccessDenied
[RequestId]: 68492335D8B6EE3636F55C97
[HostId]: xiaohashu.oss-cn-guangzhou.aliyuncs.com
[EC]: 0003-00001403
[ResponseError]:
<?xml version="1.0" encoding="UTF-8"?>
<Error>
  <Code>AccessDenied</Code>
  <Message>The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.</Message>
  <RequestId>68492335D8B6EE3636F55C97</RequestId>
  <HostId>xiaohashu.oss-cn-guangzhou.aliyuncs.com</HostId>
  <Bucket>xiaohashu</Bucket>
  <Endpoint>oss-cn-hangzhou.aliyuncs.com</Endpoint>
  <EC>0003-00001403</EC>
  <RecommendDoc>https://api.aliyun.com/troubleshoot?q=0003-00001403</RecommendDoc>
</Error>

	at com.aliyun.oss.common.utils.ExceptionFactory.createOSSException(ExceptionFactory.java:103)
	at com.aliyun.oss.internal.OSSErrorResponseHandler.handle(OSSErrorResponseHandler.java:92)
	at com.aliyun.oss.common.comm.ServiceClient.handleResponse(ServiceClient.java:284)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequestImpl(ServiceClient.java:156)
	at com.aliyun.oss.common.comm.ServiceClient.sendRequest(ServiceClient.java:85)
	at com.aliyun.oss.internal.OSSOperation.send(OSSOperation.java:134)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:192)
	at com.aliyun.oss.internal.OSSOperation.doOperation(OSSOperation.java:153)
	at com.aliyun.oss.internal.OSSObjectOperation.writeObjectInternal(OSSObjectOperation.java:1173)
	at com.aliyun.oss.internal.OSSObjectOperation.putObject(OSSObjectOperation.java:107)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:627)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:611)
	at com.aliyun.oss.OSSClient.putObject(OSSClient.java:605)
	at com.quanxiaoha.xiaohashu.oss.biz.strategy.impl.AliyunOSSFileStrategy.uploadFile(AliyunOSSFileStrategy.java:54)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:281)
	at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:482)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
	at jdk.proxy2/jdk.proxy2.$Proxy80.uploadFile(Unknown Source)
	at com.quanxiaoha.xiaohashu.oss.biz.service.impl.FileServiceImpl.uploadFile(FileServiceImpl.java:29)
	at com.quanxiaoha.xiaohashu.oss.biz.controller.FileController.uploadFile(FileController.java:32)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:547)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:614)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at com.quanxiaoha.framework.biz.context.filter.HeaderUserId2ContextFilter.doFilterInternal(HeaderUserId2ContextFilter.java:33)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:833)
2025-06-11 14:36:15.165 [nacos-grpc-client-executor-127.0.0.1-306] INFO  com.alibaba.nacos.common.remote.client - [5dd7ee9a-0c01-4f6e-8f3d-7d22e8286939_config-0] Receive server push request, request = ConfigChangeNotifyRequest, requestId = 6
2025-06-11 14:36:15.165 [nacos-grpc-client-executor-127.0.0.1-306] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [5dd7ee9a-0c01-4f6e-8f3d-7d22e8286939_config-0] [server-push] config changed. dataId=xiaohashu-oss-dev.yaml, group=DEFAULT_GROUP,tenant=xiaohashu
2025-06-11 14:36:15.165 [nacos-grpc-client-executor-127.0.0.1-306] INFO  com.alibaba.nacos.common.remote.client - [5dd7ee9a-0c01-4f6e-8f3d-7d22e8286939_config-0] Ack server push request, request = ConfigChangeNotifyRequest, requestId = 6
2025-06-11 14:36:15.216 [com.alibaba.nacos.client.Worker] INFO  com.alibaba.nacos.client.config.impl.ClientWorker - [fixed-xiaohashu-127.0.0.1_8848] [data-received] dataId=xiaohashu-oss-dev.yaml, group=DEFAULT_GROUP, tenant=xiaohashu, md5=28c92f9bf4d05a5ab1a57c377ca43fa4, content=storage:
  type: minio # 对象存储类型
, type=yaml
2025-06-11 14:36:15.219 [com.alibaba.nacos.client.Worker] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-xiaohashu-127.0.0.1_8848] [notify-listener] time cost=0ms in ClientWorker, dataId=xiaohashu-oss-dev.yaml, group=DEFAULT_GROUP, md5=28c92f9bf4d05a5ab1a57c377ca43fa4, listener=com.alibaba.cloud.nacos.refresh.NacosContextRefresher$1@57fa6652 
2025-06-11 14:36:15.219 [nacos.client.cachedata.internal.notifier] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-xiaohashu-127.0.0.1_8848] [notify-context] dataId=xiaohashu-oss-dev.yaml, group=DEFAULT_GROUP, md5=28c92f9bf4d05a5ab1a57c377ca43fa4
2025-06-11 14:36:16.673 [nacos.client.cachedata.internal.notifier] INFO  org.springframework.cloud.commons.util.InetUtils - Cannot determine local hostname
2025-06-11 14:36:16.830 [nacos.client.cachedata.internal.notifier] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-06-11 14:36:16.839 [nacos.client.cachedata.internal.notifier] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-06-11 14:36:16.906 [nacos.client.cachedata.internal.notifier] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-06-11 14:36:16.918 [nacos.client.cachedata.internal.notifier] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-oss] & group[DEFAULT_GROUP]
2025-06-11 14:36:16.925 [nacos.client.cachedata.internal.notifier] WARN  c.a.cloud.nacos.client.NacosPropertySourceBuilder - Ignore the empty nacos configuration and get it based on dataId[xiaohashu-oss.yaml] & group[DEFAULT_GROUP]
2025-06-11 14:36:16.931 [nacos.client.cachedata.internal.notifier] INFO  o.s.c.b.c.PropertySourceBootstrapConfiguration - Located property source: [BootstrapPropertySource {name='bootstrapProperties-xiaohashu-oss-dev.yaml,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-oss.yaml,DEFAULT_GROUP'}, BootstrapPropertySource {name='bootstrapProperties-xiaohashu-oss,DEFAULT_GROUP'}]
2025-06-11 14:36:16.957 [nacos.client.cachedata.internal.notifier] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2025-06-11 14:36:16.957 [nacos.client.cachedata.internal.notifier] INFO  org.springframework.boot.SpringApplication - The following 1 profile is active: "dev"
2025-06-11 14:36:16.969 [nacos.client.cachedata.internal.notifier] INFO  org.springframework.boot.SpringApplication - Started application in 1.727 seconds (process running for 1407.475)
2025-06-11 14:36:17.012 [nacos.client.cachedata.internal.notifier] INFO  o.s.cloud.endpoint.event.RefreshEventListener - Refresh keys changed: [storage.type]
2025-06-11 14:36:17.013 [nacos.client.cachedata.internal.notifier] INFO  com.alibaba.nacos.client.config.impl.CacheData - [fixed-xiaohashu-127.0.0.1_8848] [notify-ok] dataId=xiaohashu-oss-dev.yaml, group=DEFAULT_GROUP, md5=28c92f9bf4d05a5ab1a57c377ca43fa4, listener=com.alibaba.cloud.nacos.refresh.NacosContextRefresher$1@57fa6652 ,cost=1794 millis.
2025-06-11 14:36:23.935 [http-nio-8081-exec-5] INFO  c.q.xiaohashu.oss.biz.controller.FileController - 当前用户 ID: null
2025-06-11 14:36:23.938 [http-nio-8081-exec-5] INFO  c.q.x.oss.biz.strategy.impl.MinioFileStrategy - ## 上传文件至 Minio ...
2025-06-11 14:36:23.939 [http-nio-8081-exec-5] INFO  c.q.x.oss.biz.strategy.impl.MinioFileStrategy - ==> 开始上传文件至 Minio, ObjectName: 01ed46dd419a45e38b5d290de1331ec1.png
2025-06-11 14:36:24.973 [http-nio-8081-exec-5] INFO  c.q.x.oss.biz.strategy.impl.MinioFileStrategy - ==> 上传文件至 Minio 成功，访问路径: http://127.0.0.1:9000/xiaohashu/01ed46dd419a45e38b5d290de1331ec1.png
2025-06-11 15:02:20.090 [http-nio-8081-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 2101
2025-06-11 15:02:20.215 [http-nio-8081-exec-7] INFO  c.q.xiaohashu.oss.biz.controller.FileController - 当前用户 ID: 2101
2025-06-11 15:02:20.222 [http-nio-8081-exec-7] INFO  c.q.x.oss.biz.strategy.impl.MinioFileStrategy - ## 上传文件至 Minio ...
2025-06-11 15:02:20.224 [http-nio-8081-exec-7] INFO  c.q.x.oss.biz.strategy.impl.MinioFileStrategy - ==> 开始上传文件至 Minio, ObjectName: cec2ee8b66624d24b80ee22d485bed9b.png
2025-06-11 15:02:21.106 [http-nio-8081-exec-7] INFO  c.q.x.oss.biz.strategy.impl.MinioFileStrategy - ==> 上传文件至 Minio 成功，访问路径: http://127.0.0.1:9000/xiaohashu/cec2ee8b66624d24b80ee22d485bed9b.png
2025-06-11 15:02:21.113 [http-nio-8081-exec-7] INFO  c.q.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 2101
2025-06-11 15:10:30.348 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-06-11 15:10:30.348 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-06-11 15:10:30.348 [Thread-9] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-06-11 15:10:30.352 [Thread-2] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-06-11 15:10:30.420 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-06-11 15:10:30.421 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaohashu deregistering service xiaohashu-oss with instance: Instance{instanceId='null', ip='192.168.42.1', port=8081, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2025-06-11 15:10:30.426 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-06-11 15:10:30.426 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2025-06-11 15:10:30.426 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2025-06-11 15:10:30.427 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2025-06-11 15:10:30.427 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2025-06-11 15:10:30.427 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2025-06-11 15:10:30.427 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2025-06-11 15:10:30.427 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2025-06-11 15:10:30.427 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2025-06-11 15:10:30.427 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-06-11 15:10:30.427 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-06-11 15:10:30.427 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2025-06-11 15:10:30.427 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2025-06-11 15:10:30.427 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2025-06-11 15:10:30.427 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2025-06-11 15:10:30.427 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2025-06-11 15:10:30.428 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2025-06-11 15:10:30.428 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@216da734[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2025-06-11 15:10:30.428 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1749622394000_127.0.0.1_52207
2025-06-11 15:10:30.431 [nacos-grpc-client-executor-127.0.0.1-699] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1749622394000_127.0.0.1_52207]Ignore complete event,isRunning:false,isAbandon=false
2025-06-11 15:10:30.441 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@23066625[Running, pool size = 5, active threads = 0, queued tasks = 0, completed tasks = 700]
2025-06-11 15:10:30.441 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@74ab391e[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 1142]
2025-06-11 15:10:30.442 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2025-06-11 15:10:30.442 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2025-06-11 15:10:30.442 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
